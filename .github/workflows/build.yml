name: Build
on: [push, pull_request]
env:
  TERM: xterm-256color

defaults:
  run:
    shell: bash

jobs:
  build:
    name: "Build ${{ matrix.zig_version }}"
    runs-on: macos-11
    strategy:
      fail-fast: false
      matrix:
        include:
          - zig_version: 0.9.0-dev.1444+e2a2e6c14
          - zig_version: 0.9.0
    steps:
      - name: Check out code
        uses: actions/checkout@v2.4.0
      - name: Set up Zig
        uses: goto-bus-stop/setup-zig@v1.3.0
        with:
          version: ${{ matrix.zig_version }}
      - name: Set up Golang
        uses: actions/setup-go@v2.1.5
        with:
          go-version: 1.17.5
      - name: System information
        run: xcrun --show-sdk-path
      - name: Run build
        run: ./build.sh
